<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GIF Restart Örneği</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;}
    img{max-width:200px;display:block;margin:10px 0;}
    button{margin:6px 6px 6px 0;padding:8px 12px;border-radius:6px;}
  </style>
</head>
<body>
  <h2>GIF Restart Denemesi</h2>

  <p>GIF'ler:</p>
  <img class="gif" id="gif1" src="haha.gif" alt="gif1">
  <img class="gif" id="gif2" src="https://media.giphy.com/media/26xBukhF5x7x6sW8Y/giphy.gif" alt="gif2">

  <div>
    <button id="restart1">Gif 1'i yeniden başlat</button>
    <button id="restart2">Gif 2'yi yeniden başlat</button>
    <button id="restartAll">Hepsini yeniden başlat</button>
  </div>

<script>
/*
  YÖNTEM 1 (en güvenilir, ağ çağrısı yapabilir):
  - img.src'e cache-busting query ekleyerek tarayıcıyı "yeni" kaynak olarak algılatır.
  - Çoğu durumda çalışır.
*/
function restartGif_viaSrc(img) {
  if (!img) return;
  // Orijinal src'i saklamak istersen:
  const orig = img.getAttribute('data-orig-src') || img.src.split('?')[0];
  img.setAttribute('data-orig-src', orig);
  // Cache-buster olarak timestamp ekle
  img.src = orig + '?_=' + Date.now();
}

/*
  YÖNTEM 2 (network çağrısı olmadan, DOM değiştirerek):
  - img'i klonla ve replaceChild ile değiştir. Bazı tarayıcılarda bu da restart sağlar.
  - Bu yöntem offline gif'lerde, veya daha hızlı restart gerektiğinde işe yarar.
*/
function restartGif_viaClone(img) {
  if (!img || !img.parentNode) return;
  const clone = img.cloneNode(true);
  // clone'un src'sini orijinal olarak bırakıyoruz (aynı dosya)
  img.parentNode.replaceChild(clone, img);
  return clone; // gerekirse yeni referans döner
}

/*
  Küçük koruma: aynı anda çok hızlı tetiklenmesin
*/
function debounce(fn, wait=120){
  let t;
  return function(...a){
    clearTimeout(t);
    t = setTimeout(()=> fn.apply(this,a), wait);
  };
}

/* DOM yüklenince butonlarla bağla */
document.addEventListener('DOMContentLoaded', () => {
  const g1 = document.getElementById('gif1');
  const g2 = document.getElementById('gif2');

  document.getElementById('restart1').addEventListener('click', () => {
    // tercih: önce clone deneyip olmazsa src yöntemine geç
    const n = restartGif_viaClone(g1);
    // bazı tarayıcılarda clone yeterli olur, garanti istersen:
    if (!n || !(n.complete)) {
      restartGif_viaSrc(g1);
    }
  });

  document.getElementById('restart2').addEventListener('click', debounce(() => {
    // doğrudan src yöntemi
    restartGif_viaSrc(g2);
  }, 80));

  document.getElementById('restartAll').addEventListener('click', () => {
    document.querySelectorAll('img.gif').forEach(img => {
      // hızlı ve genel:
      restartGif_viaSrc(img);
      // veya restartGif_viaClone(img);
    });
  });
});
</script>
</body>
</html>